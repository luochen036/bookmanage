{% extends 'book_list.html' %}
{% block title %}
    <title>编辑图书</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/scroll.css' %}">
{% endblock %}
{% block main %}
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <ul class="nav flex-column">
                    <li class="nav-item">
                      <a class="nav-link active" aria-current="page" href="/manage/">图书管理</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="/author/">作者管理</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="/publish/">出版社管理</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link disabled">待开发</a>
                    </li>
                </ul>
            </div>
            <div class="col-md-9">
                 <div class="panel-heading">
                     <h3 class="panel-title"><span class="glyphicon glyphicon-book"></span> 图书编辑</h3>
                 </div>
                <div class="jumbotron jumbotron-fluid" style="background-image: url({% static 'image/background2.jpg' %});background-size: cover;background-position: center">
                  <div class="container">
                    <h1 class="display-4">欢迎来到图书编辑</h1>
                    <p class="lead">在这里你可以更改图书的相关信息</p>
                  </div>
                </div>
                <form action="/editbook/{{ book.id }}/" method="post">
                    {% csrf_token %}
                        <div class="form-inline" style="margin: 5px">
                            <label>书名：
                                <input type="text" class="form-control" name="title" value="{{ book.title }}">
                            </label>
                        </div>
                        <div class="form-inline" style="margin: 5px">
                            <label>价格：
                                <input type="number" class="form-control" name="price" value="{{ book.price }}">
                            </label>
                        </div>
                        <div class="form-inline" style="margin: 5px">
                            <label>作者：
                                {% for people in authors %}
                                    <input type="checkbox" name="author" value="{{ people.id }}" style="margin-left: 5px">{{ people.name }}
                                {% endfor %}
                            </label>
                        </div>
                        <div class="form-inline" style="margin: 5px">
                            <label>出版社：
                                <select name="publish">
                                    {% for come in publishes %}
                                        <option value="{{ come.id }}">{{ come.name }}</option>
                                    {% endfor %}
                                </select>
                            </label>
                        </div>
                        <div class="form-inline" style="margin: 5px">
                            <label>出版日期：
                                <input type="date" class="form-control" name="publish_date" value="{{ book.publish_date|date:'Y-m-d' }}">
                            </label>
                        </div>
                        <button type="submit" class="btn btn-success" style="margin: 5px">保存修改</button>
                        {% if error %}
                            <p style="color: red">{{ error }}</p>
                        {% endif %}
                </form>
            </div>
        </div>
    </div>
{% endblock %}